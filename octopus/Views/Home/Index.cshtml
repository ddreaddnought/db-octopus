@model octopus.DAL.SqlQuery

@{
    ViewBag.Title = "Octopus project";
}

<script src="~/Scripts/CodeMirror/lib/codemirror.js"></script>
<script src="~/Scripts/CodeMirror/mode/sql/sql.js" type="text/javascript"></script>
<link href="~/Scripts/CodeMirror/lib/codemirror.css" rel="stylesheet" type="text/css" />
<link href="~/Scripts/CodeMirror/theme/abcdef.css" rel="stylesheet" type="text/css" />
 
@using (Html.BeginForm("Execute", "Query", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { @class = "form-horizontal", role = "form" }))
{
	@Html.AntiForgeryToken()
	<h2>Run your custom query</h2>
	<hr />
	@Html.ValidationSummary("", new { @class = "text-danger" })
	<div class="form-horizontal" style="margin-top: 30px">
		<div class="form-group">
			@Html.LabelFor(m => m.Databases, htmlAttributes: new { @class = "control-label col-md-2" })
			<div class="col-md-10">
				@Html.EditorFor(m => m.Databases, new { htmlAttributes = new { @class = "form-control" } })
			</div>
		</div>
		<div class="form-group">
			@Html.LabelFor(m => m.Sql, htmlAttributes: new { @class = "control-label col-md-2" })
			<div class="col-md-10">
				@Html.TextAreaFor(m => m.Sql, new { id = "query", rows = "20", Class = "sql_input" })
			</div>
		</div>

		<div class="form-group">
			<div class="col-md-offset-2 col-md-10">
				<input type="submit" value="Execute" class="btn btn-default" />
			</div>
		</div>
	</div>
}

		<script>
			var editor = CodeMirror.fromTextArea(document.getElementById("query"), {
				lineNumbers: true,
				matchBrackets: true,
				mode: "text/x-sql",
				theme: "abcdef"
			});
		</script>

@section Scripts {
	@Scripts.Render("~/bundles/jqueryval")
}
